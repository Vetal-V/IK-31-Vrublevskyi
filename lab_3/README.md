Lab_3: Вступ до моніторингу.
-
1. Створюю папку з назвою лабораторної роботи у власному репозиторію. У папці ініціалізовую середовище pipenv командою `pipenv -python 3.7` та встановлюю необхідні пакети за допомогою команди `pipenv install django`.
2. За допомогою Django Framework створюю заготовку проекту командою `pipenv run django-admin startproject vsite`. Для зручності виношу всі створені файли на один рівень вище. У результаті получається наступна структура:  
![image](https://github.com/Vetal-V/IK-31-Vrublevskyi/blob/master/lab_3/img/1.png)

3. Оскільки все встановлено правильно, то запускаю Django сервер, виконавши команду `pipenv run python manage.py runserver`. Переходжу за посиланням `localhost:8000`:
![image](https://github.com/Vetal-V/IK-31-Vrublevskyi/blob/master/lab_3/img/2.png)

4. Зупиняю сервер виконавши переривання `Ctrl+C`. Роблю коміт базового темплейту сайту.
5. Створюю темплейт додатку (app), у якому буде описано всі web сторінки сайту за допомогою команди `pipenv run python manage.py startapp main`. Роблю коміт із новоствореними файлами темплейту додатка.
6. Використовуючи можливості IntelliJ створюю папку `main/templates/`, файл `main.html` у цій папці та файл `urls.py`. Роблю коміт з даними файлами.
7. Вказую Django frameworks назву додатку та де шукати його веб-сторінки у файлах `vsite/setting.py` та `vsite/url.py` відповідно.
8. Заповнюю вміст файлу `main/urls.py` для відображення `.html` темплейта та сторінки, що повертає відповідь у форматі JSON.
9. Заповнюю файл `main/urls.py` згідно зразка, щоб поєднати функції з реальними URL шляхами, за якими будуть доступны веб-сторінки.
10. Запускаю сервер, щоб переконатися, що сторінки доступні. Виконую коміт робочого Django сайту.
![image](https://github.com/Vetal-V/IK-31-Vrublevskyi/blob/master/lab_3/img/3.png)

11. Встановлюю необхідну для моніторингу бібліотеку за допомогою команди `pipenv install requests`.
12. Відкриваю сторінку `/health` у браузері:  
![image](https://github.com/Vetal-V/IK-31-Vrublevskyi/blob/master/lab_3/img/4.png)

13. Виконую задачі лабораторної роботи:

    і. модифікую функцію health так, щоб у відповіді були: згенерована на сервері дата, URL сторінки моніторингу, інформація про сервер на якому запущений сайт та інформація про клієнта який робить запит до сервера. Оскільки функція `os.uname()` не підтримується в Windows, то використовую аналогічну функцію в модулі `platform`:
    ![image](https://github.com/Vetal-V/IK-31-Vrublevskyi/blob/master/lab_3/img/5.png)
    
    іі. дописую функціонал який буде виводити повідомлення про недоступність сайту у випадку якщо WEB сторінка недоступна;
    
    ііі. роблю так, щоб програма моніторингу запускалась раз в хвилину та працювала в бекграунді;
    
    iv. додаю аліас на запуск сервера, який тепер буде стартувати за командою `pipenv run server`, та аліас на запуск моніторингу командою `monitoring`.

14. Запускаю сервер та переконуюся, що головна сторінка відображається. Переходжу у інше вікно консолі та запускаю програму моніторингу. Комічу файл логів `server.logs` до репозиторію.

 